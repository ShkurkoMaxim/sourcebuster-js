{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/sourcebuster.js","sourcebuster.js","src/js/data.js","src/js/helpers/cookies.js","src/js/helpers/uri.js","src/js/helpers/utils.js","src/js/init.js","src/js/migrations.js","src/js/params.js","src/js/terms.js"],"names":["e","exports","module","define","amd","f","window","global","self","sbjs","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","./src/js/sourcebuster.js","_dereq_","init","prefs","this","get","callback","./init","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/data.js","terms","utils","data","containers","current","current_extra","first","first_extra","session","udata","promocode","service","migrations","delimiter","aliases","main","type","source","medium","campaign","content","term","extra","fire_date","entrance_point","referer","pages_seen","current_page","visits","ip","agent","promo","pack","timezone_offset","setDate","Date","document","location","href","referrer","none","user","user_ip","navigator","userAgent","pages","setLeadingZeroToInt","randomInt","min","max","toString","./helpers/utils","./terms","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/cookies.js","encodeData","encodeURIComponent","replace","decodeData","decodeURIComponent","err1","unescape","err2","set","name","value","minutes","domain","excl_subdomains","expires","basehost","date","setTime","getTime","toGMTString","cookie","nameEQ","ca","split","c","charAt","substring","indexOf","destroy","parse","yummy","cookies","push","prop","hasOwnProperty","i1","cookie_array","unsbjs","i2","tmp_array","result_array","splice","join","string","../data","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/uri.js","str","parseOptions","m","parser","strictMode","exec","uri","key","q","$0","$1","$2","strict","loose","getParam","custom_params","query_string","query","search","vars","pair","arr","getHost","request","host","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/utils.js","escapeRegexp","offset","utc_offset","getTimezoneOffset","now_hours","getHours","custom_offset","setHours","year","getFullYear","month","getMonth","day","getDate","hour","minute","getMinutes","second","getSeconds","num","size","Math","floor","random","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/init.js","params","blacklist","mainData","sbjs_data","get_param","utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","yclid","p","campaign_param","term_param","content_param","setFirstAndCurrentExtraData","getData","traffic","utm","checkReferer","organic","referral","typein","__sbjs_type","__sbjs_source","__sbjs_medium","__sbjs_campaign","__sbjs_content","__sbjs_term","getUtmTerm","path","typein_attributes","oops","match","text","err","checkRefererHost","isOrganic","isReferral","isolate","host_regex","RegExp","y_host","y_param","g_host","y_host_regex","y_param_regex","g_host_regex","organics","param","display","referrals","lifetime","fetch","go","ldg","includes","Object","values","map","parseInt","pages_count","session_length","./data","./helpers/cookies","./helpers/uri","./migrations","./params","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/migrations.js","migrate","_with","d","id","mids","advance","version","mid","success","fail","safeReplace","_in","buffer","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/params.js","validate","checkFloat","checkInt","isString","hostname","ir","io","v","isNumeric","parseFloat","isNaN","prototype","/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/terms.js","social"],"mappings":"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","file":"sourcebuster.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\r\n\r\nvar init = require('./init');\r\n\r\nvar sbjs = {\r\n  init: function(prefs) {\r\n    this.get = init(prefs);\r\n    if (prefs && prefs.callback && typeof prefs.callback === 'function') {\r\n      prefs.callback(this.get);\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = sbjs;","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.sbjs=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"./src/js/sourcebuster.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar init = _dereq_('./init');\r\n\r\nvar sbjs = {\r\n  init: function(prefs) {\r\n    this.get = init(prefs);\r\n    if (prefs && prefs.callback && typeof prefs.callback === 'function') {\r\n      prefs.callback(this.get);\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = sbjs;\n},{\"./init\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/init.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/data.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar terms = _dereq_('./terms'),\r\n    utils = _dereq_('./helpers/utils');\r\n\r\nvar data = {\r\n\r\n  containers: {\r\n    current:          'sbjs_current',\r\n    current_extra:    'sbjs_current_add',\r\n    first:            'sbjs_first',\r\n    first_extra:      'sbjs_first_add',\r\n    session:          'sbjs_session',\r\n    udata:            'sbjs_udata',\r\n    promocode:        'sbjs_promo'\r\n  },\r\n\r\n  service: {\r\n    migrations:       'sbjs_migrations'\r\n  },\r\n\r\n  delimiter:          '|||',\r\n\r\n  aliases: {\r\n\r\n    main: {\r\n      type:           'typ',\r\n      source:         'src',\r\n      medium:         'mdm',\r\n      campaign:       'cmp',\r\n      content:        'cnt',\r\n      term:           'trm'\r\n    },\r\n\r\n    extra: {\r\n      fire_date:      'fd',\r\n      entrance_point: 'ep',\r\n      referer:        'rf'\r\n    },\r\n\r\n    session: {\r\n      pages_seen:     'pgs',\r\n      current_page:   'cpg'\r\n    },\r\n\r\n    udata: {\r\n      visits:         'vst',\r\n      ip:             'uip',\r\n      agent:          'uag'\r\n    },\r\n\r\n    promo:            'code'\r\n\r\n  },\r\n\r\n  pack: {\r\n\r\n    main: function(sbjs) {\r\n      return (\r\n        data.aliases.main.type      + '=' + sbjs.type     + data.delimiter +\r\n        data.aliases.main.source    + '=' + sbjs.source   + data.delimiter +\r\n        data.aliases.main.medium    + '=' + sbjs.medium   + data.delimiter +\r\n        data.aliases.main.campaign  + '=' + sbjs.campaign + data.delimiter +\r\n        data.aliases.main.content   + '=' + sbjs.content  + data.delimiter +\r\n        data.aliases.main.term      + '=' + sbjs.term\r\n      );\r\n    },\r\n\r\n    extra: function(timezone_offset) {\r\n      return (\r\n        data.aliases.extra.fire_date      + '=' + utils.setDate(new Date, timezone_offset) + data.delimiter +\r\n        data.aliases.extra.entrance_point + '=' + document.location.href                   + data.delimiter +\r\n        data.aliases.extra.referer        + '=' + (document.referrer || terms.none)\r\n      );\r\n    },\r\n\r\n    user: function(visits, user_ip) {\r\n      return (\r\n        data.aliases.udata.visits + '=' + visits  + data.delimiter +\r\n        data.aliases.udata.ip     + '=' + user_ip + data.delimiter +\r\n        data.aliases.udata.agent  + '=' + navigator.userAgent\r\n      );\r\n    },\r\n\r\n    session: function(pages) {\r\n      return (\r\n      data.aliases.session.pages_seen   + '=' + pages + data.delimiter +\r\n      data.aliases.session.current_page + '=' + document.location.href\r\n      );\r\n    },\r\n\r\n    promo: function(promo) {\r\n      return (\r\n        data.aliases.promo + '=' + utils.setLeadingZeroToInt(utils.randomInt(promo.min, promo.max), promo.max.toString().length)\r\n      );\r\n    }\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = data;\n},{\"./helpers/utils\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/utils.js\",\"./terms\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/terms.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/cookies.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar delimiter = _dereq_('../data').delimiter;\r\n\r\nmodule.exports = {\r\n\r\n  encodeData: function(s) {\r\n    return encodeURIComponent(s).replace(/\\!/g, '%21')\r\n                                .replace(/\\~/g, '%7E')\r\n                                .replace(/\\*/g, '%2A')\r\n                                .replace(/\\'/g, '%27')\r\n                                .replace(/\\(/g, '%28')\r\n                                .replace(/\\)/g, '%29');\r\n  },\r\n\r\n  decodeData: function(s) {\r\n    try {\r\n      return decodeURIComponent(s).replace(/\\%21/g, '!')\r\n                                  .replace(/\\%7E/g, '~')\r\n                                  .replace(/\\%2A/g, '*')\r\n                                  .replace(/\\%27/g, \"'\")\r\n                                  .replace(/\\%28/g, '(')\r\n                                  .replace(/\\%29/g, ')');\r\n    } catch(err1) {\r\n      // try unescape for backward compatibility\r\n      try { return unescape(s); } catch(err2) { return ''; }\r\n    }\r\n  },\r\n\r\n  set: function(name, value, minutes, domain, excl_subdomains) {\r\n    var expires, basehost;\r\n\r\n    if (minutes) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (minutes * 60 * 1000));\r\n      expires = '; expires=' + date.toGMTString();\r\n    } else {\r\n      expires = '';\r\n    }\r\n    if (domain && !excl_subdomains) {\r\n      basehost = ';domain=.' + domain;\r\n    } else {\r\n      basehost = '';\r\n    }\r\n    document.cookie = this.encodeData(name) + '=' + this.encodeData(value) + expires + basehost + '; path=/';\r\n  },\r\n\r\n  get: function(name) {\r\n    var nameEQ = this.encodeData(name) + '=',\r\n        ca = document.cookie.split(';');\r\n\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') { c = c.substring(1, c.length); }\r\n      if (c.indexOf(nameEQ) === 0) {\r\n        return this.decodeData(c.substring(nameEQ.length, c.length));\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  destroy: function(name, domain, excl_subdomains) {\r\n    this.set(name, '', -1, domain, excl_subdomains);\r\n  },\r\n\r\n  parse: function(yummy) {\r\n\r\n    var cookies = [],\r\n        data    = {};\r\n\r\n    if (typeof yummy === 'string') {\r\n      cookies.push(yummy);\r\n    } else {\r\n      for (var prop in yummy) {\r\n        if (yummy.hasOwnProperty(prop)) {\r\n          cookies.push(yummy[prop]);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (var i1 = 0; i1 < cookies.length; i1++) {\r\n      var cookie_array;\r\n      data[this.unsbjs(cookies[i1])] = {};\r\n      if (this.get(cookies[i1])) {\r\n        cookie_array = this.get(cookies[i1]).split(delimiter);\r\n      } else {\r\n        cookie_array = [];\r\n      }\r\n      for (var i2 = 0; i2 < cookie_array.length; i2++) {\r\n        var tmp_array = cookie_array[i2].split('='),\r\n            result_array = tmp_array.splice(0, 1);\r\n        result_array.push(tmp_array.join('='));\r\n        data[this.unsbjs(cookies[i1])][result_array[0]] = this.decodeData(result_array[1]);\r\n      }\r\n    }\r\n\r\n    return data;\r\n\r\n  },\r\n\r\n  unsbjs: function (string) {\r\n    return string.replace('sbjs_', '');\r\n  }\r\n\r\n};\r\n\n},{\"../data\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/data.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/uri.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  parse: function(str) {\r\n    var o = this.parseOptions,\r\n        m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) { uri[o.key[i]] = m[i] || ''; }\r\n\r\n    uri[o.q.name] = {};\r\n    uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\r\n      if ($1) { uri[o.q.name][$1] = $2; }\r\n    });\r\n\r\n    return uri;\r\n  },\r\n\r\n  parseOptions: {\r\n    strictMode: false,\r\n    key: ['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'],\r\n    q: {\r\n      name:   'queryKey',\r\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\r\n    },\r\n    parser: {\r\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\r\n      loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\r\n    }\r\n  },\r\n\r\n  getParam: function(custom_params) {\r\n    var query_string = {},\r\n        query = custom_params ? custom_params : window.location.search.substring(1),\r\n        vars = query.split('&');\r\n\r\n    for (var i = 0; i < vars.length; i++) {\r\n      var pair = vars[i].split('=');\r\n      if (typeof query_string[pair[0]] === 'undefined') {\r\n        query_string[pair[0]] = pair[1];\r\n      } else if (typeof query_string[pair[0]] === 'string') {\r\n        var arr = [ query_string[pair[0]], pair[1] ];\r\n        query_string[pair[0]] = arr;\r\n      } else {\r\n        query_string[pair[0]].push(pair[1]);\r\n      }\r\n    }\r\n    return query_string;\r\n  },\r\n\r\n  getHost: function(request) {\r\n    return this.parse(request).host.replace('www.', '');\r\n  }\r\n\r\n};\n},{}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/utils.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  escapeRegexp: function(string) {\r\n    return string.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  },\r\n\r\n  setDate: function(date, offset) {\r\n    var utc_offset    = date.getTimezoneOffset() / 60,\r\n        now_hours     = date.getHours(),\r\n        custom_offset = offset || offset === 0 ? offset : -utc_offset;\r\n\r\n    date.setHours(now_hours + utc_offset + custom_offset);\r\n\r\n    var year    = date.getFullYear(),\r\n        month   = this.setLeadingZeroToInt(date.getMonth() + 1,   2),\r\n        day     = this.setLeadingZeroToInt(date.getDate(),        2),\r\n        hour    = this.setLeadingZeroToInt(date.getHours(),       2),\r\n        minute  = this.setLeadingZeroToInt(date.getMinutes(),     2),\r\n        second  = this.setLeadingZeroToInt(date.getSeconds(),     2);\r\n\r\n    return (year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second);\r\n  },\r\n\r\n  setLeadingZeroToInt: function(num, size) {\r\n    var s = num + '';\r\n    while (s.length < size) { s = '0' + s; }\r\n    return s;\r\n  },\r\n\r\n  randomInt: function(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n};\r\n\n},{}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/init.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar data        = _dereq_('./data'),\r\n    terms       = _dereq_('./terms'),\r\n    cookies     = _dereq_('./helpers/cookies'),\r\n    uri         = _dereq_('./helpers/uri'),\r\n    utils       = _dereq_('./helpers/utils'),\r\n    params      = _dereq_('./params'),\r\n    migrations  = _dereq_('./migrations');\r\n\r\nvar blacklist = ['partner', 'office', 'agent'];\r\n\r\nmodule.exports = function(prefs) {\r\n\r\n  var p         = params.fetch(prefs);\r\n  var get_param = uri.getParam();\r\n  var domain    = p.domain.host,\r\n      isolate   = p.domain.isolate,\r\n      lifetime  = p.lifetime;\r\n\r\n  migrations.go(lifetime, domain, isolate);\r\n\r\n  var __sbjs_type,\r\n      __sbjs_source,\r\n      __sbjs_medium,\r\n      __sbjs_campaign,\r\n      __sbjs_content,\r\n      __sbjs_term;\r\n\r\n  function mainData() {\r\n    var sbjs_data;\r\n    if (\r\n        typeof get_param.utm_source        !== 'undefined' ||\r\n        typeof get_param.utm_medium        !== 'undefined' ||\r\n        typeof get_param.utm_campaign      !== 'undefined' ||\r\n        typeof get_param.utm_content       !== 'undefined' ||\r\n        typeof get_param.utm_term          !== 'undefined' ||\r\n        typeof get_param.gclid             !== 'undefined' ||\r\n        typeof get_param.yclid             !== 'undefined' ||\r\n        typeof get_param[p.campaign_param] !== 'undefined' ||\r\n        typeof get_param[p.term_param]     !== 'undefined' ||\r\n        typeof get_param[p.content_param]  !== 'undefined'\r\n    ) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.utm);\r\n    } else if (checkReferer(terms.traffic.organic)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.organic);\r\n    } else if (!cookies.get(data.containers.session) && checkReferer(terms.traffic.referral)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.referral);\r\n    } else if (!cookies.get(data.containers.first) && !cookies.get(data.containers.current)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.typein);\r\n    } else {\r\n      return cookies.get(data.containers.current);\r\n    }\r\n\r\n    return sbjs_data;\r\n  }\r\n\r\n  function getData(type) {\r\n\r\n    switch (type) {\r\n\r\n      case terms.traffic.utm:\r\n\r\n        __sbjs_type = terms.traffic.utm;\r\n\r\n        if (typeof get_param.utm_source !== 'undefined') {\r\n          __sbjs_source = get_param.utm_source;\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_source = 'google';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_source = 'yandex';  \r\n        } else {\r\n          __sbjs_source = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_medium !== 'undefined') {\r\n          __sbjs_medium = get_param.utm_medium;\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_medium = 'cpc';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_medium = 'cpc';  \r\n        } else {\r\n          __sbjs_medium = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_campaign !== 'undefined') {\r\n          __sbjs_campaign = get_param.utm_campaign;\r\n        } else if (typeof get_param[p.campaign_param] !== 'undefined') {\r\n          __sbjs_campaign = get_param[p.campaign_param];\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_campaign = 'google_cpc';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_campaign = 'yandex_cpc';  \r\n        } else {\r\n          __sbjs_campaign = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_content !== 'undefined') {\r\n          __sbjs_content = get_param.utm_content;\r\n        } else if (typeof get_param[p.content_param] !== 'undefined') {\r\n          __sbjs_content = get_param[p.content_param];\r\n        } else {\r\n          __sbjs_content = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_term !== 'undefined') {\r\n          __sbjs_term = get_param.utm_term;\r\n        } else if (typeof get_param[p.term_param] !== 'undefined') {\r\n          __sbjs_term = get_param[p.term_param];\r\n        } else {\r\n          __sbjs_term = getUtmTerm() || terms.none;\r\n        }\r\n\r\n        break;\r\n\r\n      case terms.traffic.organic:\r\n        __sbjs_type     = terms.traffic.organic;\r\n        __sbjs_source   = __sbjs_source || uri.getHost(document.referrer);\r\n        __sbjs_medium   = terms.referer.organic;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = terms.none;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      case terms.traffic.referral:\r\n        __sbjs_type     = terms.traffic.referral;\r\n        __sbjs_source   = __sbjs_source || uri.getHost(document.referrer);\r\n        __sbjs_medium   = __sbjs_medium || terms.referer.referral;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = uri.parse(document.referrer).path;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      case terms.traffic.typein:\r\n        __sbjs_type     = terms.traffic.typein;\r\n        __sbjs_source   = p.typein_attributes.source;\r\n        __sbjs_medium   = p.typein_attributes.medium;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = terms.none;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      default:\r\n        __sbjs_type     = terms.oops;\r\n        __sbjs_source   = terms.oops;\r\n        __sbjs_medium   = terms.oops;\r\n        __sbjs_campaign = terms.oops;\r\n        __sbjs_content  = terms.oops;\r\n        __sbjs_term     = terms.oops;\r\n    }\r\n    var sbjs_data = {\r\n      type:             __sbjs_type,\r\n      source:           __sbjs_source,\r\n      medium:           __sbjs_medium,\r\n      campaign:         __sbjs_campaign,\r\n      content:          __sbjs_content,\r\n      term:             __sbjs_term\r\n    };\r\n\r\n    return data.pack.main(sbjs_data);\r\n\r\n  }\r\n\r\n  function getUtmTerm() {\r\n    var referer = document.referrer;\r\n    if (get_param.utm_term) {\r\n      return get_param.utm_term;\r\n    } else if (referer && uri.parse(referer).host && uri.parse(referer).host.match(/^(?:.*\\.)?yandex\\..{2,9}$/i)) {\r\n      try {\r\n        return uri.getParam(uri.parse(document.referrer).query).text;\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function checkReferer(type) {\r\n    var referer = document.referrer;\r\n    switch(type) {\r\n      case terms.traffic.organic:\r\n        return (!!referer && checkRefererHost(referer) && isOrganic(referer));\r\n      case terms.traffic.referral:\r\n        return (!!referer && checkRefererHost(referer) && isReferral(referer));\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  function checkRefererHost(referer) {\r\n    if (p.domain) {\r\n      if (!isolate) {\r\n        var host_regex = new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(domain) + '$', 'i');\r\n        return !(uri.getHost(referer).match(host_regex));\r\n      } else {\r\n        return (uri.getHost(referer) !== uri.getHost(domain));\r\n      }\r\n    } else {\r\n      return (uri.getHost(referer) !== uri.getHost(document.location.href));\r\n    }\r\n  }\r\n\r\n  function isOrganic(referer) {\r\n\r\n    var y_host  = 'yandex',\r\n        y_param = 'text',\r\n        g_host  = 'google';\r\n\r\n    var y_host_regex  = new RegExp('^(?:.*\\\\.)?'  + utils.escapeRegexp(y_host)  + '\\\\..{2,9}$'),\r\n        y_param_regex = new RegExp('.*'           + utils.escapeRegexp(y_param) + '=.*'),\r\n        g_host_regex  = new RegExp('^(?:www\\\\.)?' + utils.escapeRegexp(g_host)  + '\\\\..{2,9}$');\r\n\r\n    if (\r\n        !!uri.parse(referer).query &&\r\n        !!uri.parse(referer).host.match(y_host_regex) &&\r\n        !!uri.parse(referer).query.match(y_param_regex)\r\n      ) {\r\n      __sbjs_source = y_host;\r\n      return true;\r\n    } else if (!!uri.parse(referer).host.match(g_host_regex)) {\r\n      __sbjs_source = g_host;\r\n      return true;\r\n    } else if (!!uri.parse(referer).query) {\r\n      for (var i = 0; i < p.organics.length; i++) {\r\n        if (\r\n            uri.parse(referer).host.match(new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(p.organics[i].host)  + '$', 'i')) &&\r\n            uri.parse(referer).query.match(new RegExp('.*'         + utils.escapeRegexp(p.organics[i].param) + '=.*', 'i'))\r\n          ) {\r\n          __sbjs_source = p.organics[i].display || p.organics[i].host;\r\n          return true;\r\n        }\r\n        if (i + 1 === p.organics.length) {\r\n          return false;\r\n        }\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function isReferral(referer) {\r\n    if (p.referrals.length > 0) {\r\n      for (var i = 0; i < p.referrals.length; i++) {\r\n        if (uri.parse(referer).host.match(new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(p.referrals[i].host) + '$', 'i'))) {\r\n          __sbjs_source = p.referrals[i].display  || p.referrals[i].host;\r\n          __sbjs_medium = p.referrals[i].medium   || terms.referer.referral;\r\n          return true;\r\n        }\r\n        if (i + 1 === p.referrals.length) {\r\n          __sbjs_source = uri.getHost(referer);\r\n          return true;\r\n        }\r\n      }\r\n    } else {\r\n      __sbjs_source = uri.getHost(referer);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  function setFirstAndCurrentExtraData() {\r\n    cookies.set(data.containers.current_extra, data.pack.extra(p.timezone_offset), lifetime, domain, isolate);\r\n    if (!cookies.get(data.containers.first_extra)) {\r\n      cookies.set(data.containers.first_extra, data.pack.extra(p.timezone_offset), lifetime, domain, isolate);\r\n    }\r\n  }\r\n\r\n  (function setData() {\r\n\r\n    if (get_param.ldg && blacklist.includes(get_param.ldg)) {\r\n      // destroy sourcebuster cookies on blacklist\r\n      Object.values(data.containers).map(function(cookie) {\r\n        cookies.destroy(cookie, domain, isolate);\r\n      });\r\n      return;\r\n    }\r\n    // Main data\r\n    cookies.set(data.containers.current, mainData(), lifetime, domain, isolate);\r\n    if (!cookies.get(data.containers.first)) {\r\n      cookies.set(data.containers.first, cookies.get(data.containers.current), lifetime, domain, isolate);\r\n    }\r\n\r\n    // User data\r\n    var visits, udata;\r\n    if (!cookies.get(data.containers.udata)) {\r\n      visits  = 1;\r\n      udata   = data.pack.user(visits, p.user_ip);\r\n    } else {\r\n      visits  = parseInt(cookies.parse(data.containers.udata)[cookies.unsbjs(data.containers.udata)][data.aliases.udata.visits]) || 1;\r\n      visits  = cookies.get(data.containers.session) ? visits : visits + 1;\r\n      udata   = data.pack.user(visits, p.user_ip);\r\n    }\r\n    cookies.set(data.containers.udata, udata, lifetime, domain, isolate);\r\n\r\n    // Session\r\n    var pages_count;\r\n    if (!cookies.get(data.containers.session)) {\r\n      pages_count = 1;\r\n    } else {\r\n      pages_count = parseInt(cookies.parse(data.containers.session)[cookies.unsbjs(data.containers.session)][data.aliases.session.pages_seen]) || 1;\r\n      pages_count += 1;\r\n    }\r\n    cookies.set(data.containers.session, data.pack.session(pages_count), p.session_length, domain, isolate);\r\n\r\n    // Promocode\r\n    if (p.promocode && !cookies.get(data.containers.promocode)) {\r\n      cookies.set(data.containers.promocode, data.pack.promo(p.promocode), lifetime, domain, isolate);\r\n    }\r\n\r\n  })();\r\n\r\n  return cookies.parse(data.containers);\r\n\r\n};\n},{\"./data\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/data.js\",\"./helpers/cookies\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/cookies.js\",\"./helpers/uri\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/uri.js\",\"./helpers/utils\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/utils.js\",\"./migrations\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/migrations.js\",\"./params\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/params.js\",\"./terms\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/terms.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/migrations.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar data    = _dereq_('./data'),\r\n    cookies = _dereq_('./helpers/cookies');\r\n\r\nmodule.exports = {\r\n\r\n  go: function(lifetime, domain, isolate) {\r\n\r\n    var migrate = this.migrations,\r\n        _with   = { l: lifetime, d: domain, i: isolate };\r\n\r\n    var i;\r\n\r\n    if (!cookies.get(data.containers.first) && !cookies.get(data.service.migrations)) {\r\n\r\n      var mids = [];\r\n      for (i = 0; i < migrate.length; i++) { mids.push(migrate[i].id); }\r\n\r\n      var advance = '';\r\n      for (i = 0; i < mids.length; i++) {\r\n        advance += mids[i] + '=1';\r\n        if (i < mids.length - 1) { advance += data.delimiter; }\r\n      }\r\n      cookies.set(data.service.migrations, advance, _with.l, _with.d, _with.i);\r\n\r\n    } else if (!cookies.get(data.service.migrations)) {\r\n\r\n      // We have only one migration for now, so just\r\n      for (i = 0; i < migrate.length; i++) {\r\n        migrate[i].go(migrate[i].id, _with);\r\n      }\r\n\r\n    }\r\n\r\n  },\r\n\r\n  migrations: [\r\n\r\n    {\r\n      id: '1418474375998',\r\n      version: '1.0.0-beta',\r\n      go: function(mid, _with) {\r\n\r\n        var success = mid + '=1',\r\n            fail    = mid + '=0';\r\n\r\n        var safeReplace = function($0, $1, $2) {\r\n          return ($1 || $2 ? $0 : data.delimiter);\r\n        };\r\n\r\n        try {\r\n\r\n          // Switch delimiter and renew cookies\r\n          var _in = [];\r\n          for (var prop in data.containers) {\r\n            if (data.containers.hasOwnProperty(prop)) {\r\n              _in.push(data.containers[prop]);\r\n            }\r\n          }\r\n\r\n          for (var i = 0; i < _in.length; i++) {\r\n            if (cookies.get(_in[i])) {\r\n              var buffer = cookies.get(_in[i]).replace(/(\\|)?\\|(\\|)?/g, safeReplace);\r\n              cookies.destroy(_in[i], _with.d, _with.i);\r\n              cookies.destroy(_in[i], _with.d, !_with.i);\r\n              cookies.set(_in[i], buffer, _with.l, _with.d, _with.i);\r\n            }\r\n          }\r\n\r\n          // Update `session`\r\n          if (cookies.get(data.containers.session)) {\r\n            cookies.set(data.containers.session, data.pack.session(0), _with.l, _with.d, _with.i);\r\n          }\r\n\r\n          // Yay!\r\n          cookies.set(data.service.migrations, success, _with.l, _with.d, _with.i);\r\n\r\n        } catch (err) {\r\n          // Oops\r\n          cookies.set(data.service.migrations, fail, _with.l, _with.d, _with.i);\r\n        }\r\n      }\r\n    }\r\n\r\n  ]\r\n\r\n};\n},{\"./data\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/data.js\",\"./helpers/cookies\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/cookies.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/params.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nvar terms = _dereq_('./terms'),\r\n    uri   = _dereq_('./helpers/uri');\r\n\r\nmodule.exports = {\r\n\r\n  fetch: function(prefs) {\r\n\r\n    var user   = prefs || {},\r\n        params = {};\r\n\r\n    // Set `lifetime of the cookie` in months\r\n    params.lifetime = this.validate.checkFloat(user.lifetime) || 6;\r\n    params.lifetime = parseInt(params.lifetime * 30 * 24 * 60);\r\n\r\n    // Set `session length` in minutes\r\n    params.session_length = this.validate.checkInt(user.session_length) || 30;\r\n\r\n    // Set `timezone offset` in hours\r\n    params.timezone_offset = this.validate.checkInt(user.timezone_offset);\r\n\r\n    // Set `campaign param` for AdWords links\r\n    params.campaign_param = user.campaign_param || false;\r\n\r\n    // Set `term param` and `content param` for AdWords links\r\n    params.term_param = user.term_param || false;\r\n    params.content_param = user.content_param || false;\r\n\r\n    // Set `user ip`\r\n    params.user_ip = user.user_ip || terms.none;\r\n\r\n    // Set `promocode`\r\n    if (user.promocode) {\r\n      params.promocode = {};\r\n      params.promocode.min = parseInt(user.promocode.min) || 100000;\r\n      params.promocode.max = parseInt(user.promocode.max) || 999999;\r\n    } else {\r\n      params.promocode = false;\r\n    }\r\n\r\n    // Set `typein attributes`\r\n    if (user.typein_attributes && user.typein_attributes.source && user.typein_attributes.medium) {\r\n      params.typein_attributes = {};\r\n      params.typein_attributes.source = user.typein_attributes.source;\r\n      params.typein_attributes.medium = user.typein_attributes.medium;\r\n    } else {\r\n      params.typein_attributes = { source: '(direct)', medium: '(none)' };\r\n    }\r\n\r\n    // Set `domain`\r\n    if (user.domain && this.validate.isString(user.domain)) {\r\n      params.domain = { host: user.domain, isolate: false };\r\n    } else if (user.domain && user.domain.host) {\r\n      params.domain = user.domain;\r\n    } else {\r\n      params.domain = { host: uri.getHost(document.location.hostname), isolate: false };\r\n    }\r\n\r\n    // Set `referral sources`\r\n    params.referrals = [];\r\n\r\n    if (user.referrals && user.referrals.length > 0) {\r\n      for (var ir = 0; ir < user.referrals.length; ir++) {\r\n        if (user.referrals[ir].host) {\r\n          params.referrals.push(user.referrals[ir]);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Set `organic sources`\r\n    params.organics = [];\r\n\r\n    if (user.organics && user.organics.length > 0) {\r\n      for (var io = 0; io < user.organics.length; io++) {\r\n        if (user.organics[io].host && user.organics[io].param) {\r\n          params.organics.push(user.organics[io]);\r\n        }\r\n      }\r\n    }\r\n\r\n    params.organics.push({ host: 'bing.com',      param: 'q',     display: 'bing'            });\r\n    params.organics.push({ host: 'yahoo.com',     param: 'p',     display: 'yahoo'           });\r\n    params.organics.push({ host: 'about.com',     param: 'q',     display: 'about'           });\r\n    params.organics.push({ host: 'aol.com',       param: 'q',     display: 'aol'             });\r\n    params.organics.push({ host: 'ask.com',       param: 'q',     display: 'ask'             });\r\n    params.organics.push({ host: 'globososo.com', param: 'q',     display: 'globo'           });\r\n    params.organics.push({ host: 'go.mail.ru',    param: 'q',     display: 'go.mail.ru'      });\r\n    params.organics.push({ host: 'rambler.ru',    param: 'query', display: 'rambler'         });\r\n    params.organics.push({ host: 'tut.by',        param: 'query', display: 'tut.by'          });\r\n\r\n    params.referrals.push({ host: 't.co',                         display: 'twitter.com'     });\r\n    params.referrals.push({ host: 'plus.url.google.com',          display: 'plus.google.com' });\r\n\r\n\r\n    return params;\r\n\r\n  },\r\n\r\n  validate: {\r\n\r\n    checkFloat: function(v) {\r\n      return v && this.isNumeric(parseFloat(v)) ? parseFloat(v) : false;\r\n    },\r\n\r\n    checkInt: function(v) {\r\n      return v && this.isNumeric(parseInt(v)) ? parseInt(v) : false;\r\n    },\r\n\r\n    isNumeric: function(v){\r\n      return !isNaN(v);\r\n    },\r\n\r\n    isString: function(v) {\r\n      return Object.prototype.toString.call(v) === '[object String]';\r\n    }\r\n\r\n  }\r\n\r\n};\n},{\"./helpers/uri\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/helpers/uri.js\",\"./terms\":\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/terms.js\"}],\"/mnt/d/Work/SKBLAB/sourcebuster-js/src/js/terms.js\":[function(_dereq_,module,exports){\n\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  traffic: {\r\n    utm:        'utm',\r\n    organic:    'organic',\r\n    referral:   'referral',\r\n    typein:     'typein'\r\n  },\r\n\r\n  referer: {\r\n    referral:   'referral',\r\n    organic:    'organic',\r\n    social:     'social'\r\n  },\r\n\r\n  none:         '(none)',\r\n  oops:         '(Houston, we have a problem)'\r\n\r\n};\r\n\n},{}]},{},[\"./src/js/sourcebuster.js\"])(\"./src/js/sourcebuster.js\")\n});\n\n","\"use strict\";\r\n\r\nvar terms = require('./terms'),\r\n    utils = require('./helpers/utils');\r\n\r\nvar data = {\r\n\r\n  containers: {\r\n    current:          'sbjs_current',\r\n    current_extra:    'sbjs_current_add',\r\n    first:            'sbjs_first',\r\n    first_extra:      'sbjs_first_add',\r\n    session:          'sbjs_session',\r\n    udata:            'sbjs_udata',\r\n    promocode:        'sbjs_promo'\r\n  },\r\n\r\n  service: {\r\n    migrations:       'sbjs_migrations'\r\n  },\r\n\r\n  delimiter:          '|||',\r\n\r\n  aliases: {\r\n\r\n    main: {\r\n      type:           'typ',\r\n      source:         'src',\r\n      medium:         'mdm',\r\n      campaign:       'cmp',\r\n      content:        'cnt',\r\n      term:           'trm'\r\n    },\r\n\r\n    extra: {\r\n      fire_date:      'fd',\r\n      entrance_point: 'ep',\r\n      referer:        'rf'\r\n    },\r\n\r\n    session: {\r\n      pages_seen:     'pgs',\r\n      current_page:   'cpg'\r\n    },\r\n\r\n    udata: {\r\n      visits:         'vst',\r\n      ip:             'uip',\r\n      agent:          'uag'\r\n    },\r\n\r\n    promo:            'code'\r\n\r\n  },\r\n\r\n  pack: {\r\n\r\n    main: function(sbjs) {\r\n      return (\r\n        data.aliases.main.type      + '=' + sbjs.type     + data.delimiter +\r\n        data.aliases.main.source    + '=' + sbjs.source   + data.delimiter +\r\n        data.aliases.main.medium    + '=' + sbjs.medium   + data.delimiter +\r\n        data.aliases.main.campaign  + '=' + sbjs.campaign + data.delimiter +\r\n        data.aliases.main.content   + '=' + sbjs.content  + data.delimiter +\r\n        data.aliases.main.term      + '=' + sbjs.term\r\n      );\r\n    },\r\n\r\n    extra: function(timezone_offset) {\r\n      return (\r\n        data.aliases.extra.fire_date      + '=' + utils.setDate(new Date, timezone_offset) + data.delimiter +\r\n        data.aliases.extra.entrance_point + '=' + document.location.href                   + data.delimiter +\r\n        data.aliases.extra.referer        + '=' + (document.referrer || terms.none)\r\n      );\r\n    },\r\n\r\n    user: function(visits, user_ip) {\r\n      return (\r\n        data.aliases.udata.visits + '=' + visits  + data.delimiter +\r\n        data.aliases.udata.ip     + '=' + user_ip + data.delimiter +\r\n        data.aliases.udata.agent  + '=' + navigator.userAgent\r\n      );\r\n    },\r\n\r\n    session: function(pages) {\r\n      return (\r\n      data.aliases.session.pages_seen   + '=' + pages + data.delimiter +\r\n      data.aliases.session.current_page + '=' + document.location.href\r\n      );\r\n    },\r\n\r\n    promo: function(promo) {\r\n      return (\r\n        data.aliases.promo + '=' + utils.setLeadingZeroToInt(utils.randomInt(promo.min, promo.max), promo.max.toString().length)\r\n      );\r\n    }\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = data;","\"use strict\";\r\n\r\nvar delimiter = require('../data').delimiter;\r\n\r\nmodule.exports = {\r\n\r\n  encodeData: function(s) {\r\n    return encodeURIComponent(s).replace(/\\!/g, '%21')\r\n                                .replace(/\\~/g, '%7E')\r\n                                .replace(/\\*/g, '%2A')\r\n                                .replace(/\\'/g, '%27')\r\n                                .replace(/\\(/g, '%28')\r\n                                .replace(/\\)/g, '%29');\r\n  },\r\n\r\n  decodeData: function(s) {\r\n    try {\r\n      return decodeURIComponent(s).replace(/\\%21/g, '!')\r\n                                  .replace(/\\%7E/g, '~')\r\n                                  .replace(/\\%2A/g, '*')\r\n                                  .replace(/\\%27/g, \"'\")\r\n                                  .replace(/\\%28/g, '(')\r\n                                  .replace(/\\%29/g, ')');\r\n    } catch(err1) {\r\n      // try unescape for backward compatibility\r\n      try { return unescape(s); } catch(err2) { return ''; }\r\n    }\r\n  },\r\n\r\n  set: function(name, value, minutes, domain, excl_subdomains) {\r\n    var expires, basehost;\r\n\r\n    if (minutes) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (minutes * 60 * 1000));\r\n      expires = '; expires=' + date.toGMTString();\r\n    } else {\r\n      expires = '';\r\n    }\r\n    if (domain && !excl_subdomains) {\r\n      basehost = ';domain=.' + domain;\r\n    } else {\r\n      basehost = '';\r\n    }\r\n    document.cookie = this.encodeData(name) + '=' + this.encodeData(value) + expires + basehost + '; path=/';\r\n  },\r\n\r\n  get: function(name) {\r\n    var nameEQ = this.encodeData(name) + '=',\r\n        ca = document.cookie.split(';');\r\n\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') { c = c.substring(1, c.length); }\r\n      if (c.indexOf(nameEQ) === 0) {\r\n        return this.decodeData(c.substring(nameEQ.length, c.length));\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  destroy: function(name, domain, excl_subdomains) {\r\n    this.set(name, '', -1, domain, excl_subdomains);\r\n  },\r\n\r\n  parse: function(yummy) {\r\n\r\n    var cookies = [],\r\n        data    = {};\r\n\r\n    if (typeof yummy === 'string') {\r\n      cookies.push(yummy);\r\n    } else {\r\n      for (var prop in yummy) {\r\n        if (yummy.hasOwnProperty(prop)) {\r\n          cookies.push(yummy[prop]);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (var i1 = 0; i1 < cookies.length; i1++) {\r\n      var cookie_array;\r\n      data[this.unsbjs(cookies[i1])] = {};\r\n      if (this.get(cookies[i1])) {\r\n        cookie_array = this.get(cookies[i1]).split(delimiter);\r\n      } else {\r\n        cookie_array = [];\r\n      }\r\n      for (var i2 = 0; i2 < cookie_array.length; i2++) {\r\n        var tmp_array = cookie_array[i2].split('='),\r\n            result_array = tmp_array.splice(0, 1);\r\n        result_array.push(tmp_array.join('='));\r\n        data[this.unsbjs(cookies[i1])][result_array[0]] = this.decodeData(result_array[1]);\r\n      }\r\n    }\r\n\r\n    return data;\r\n\r\n  },\r\n\r\n  unsbjs: function (string) {\r\n    return string.replace('sbjs_', '');\r\n  }\r\n\r\n};\r\n","\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  parse: function(str) {\r\n    var o = this.parseOptions,\r\n        m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) { uri[o.key[i]] = m[i] || ''; }\r\n\r\n    uri[o.q.name] = {};\r\n    uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\r\n      if ($1) { uri[o.q.name][$1] = $2; }\r\n    });\r\n\r\n    return uri;\r\n  },\r\n\r\n  parseOptions: {\r\n    strictMode: false,\r\n    key: ['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'],\r\n    q: {\r\n      name:   'queryKey',\r\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\r\n    },\r\n    parser: {\r\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\r\n      loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\r\n    }\r\n  },\r\n\r\n  getParam: function(custom_params) {\r\n    var query_string = {},\r\n        query = custom_params ? custom_params : window.location.search.substring(1),\r\n        vars = query.split('&');\r\n\r\n    for (var i = 0; i < vars.length; i++) {\r\n      var pair = vars[i].split('=');\r\n      if (typeof query_string[pair[0]] === 'undefined') {\r\n        query_string[pair[0]] = pair[1];\r\n      } else if (typeof query_string[pair[0]] === 'string') {\r\n        var arr = [ query_string[pair[0]], pair[1] ];\r\n        query_string[pair[0]] = arr;\r\n      } else {\r\n        query_string[pair[0]].push(pair[1]);\r\n      }\r\n    }\r\n    return query_string;\r\n  },\r\n\r\n  getHost: function(request) {\r\n    return this.parse(request).host.replace('www.', '');\r\n  }\r\n\r\n};","\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  escapeRegexp: function(string) {\r\n    return string.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  },\r\n\r\n  setDate: function(date, offset) {\r\n    var utc_offset    = date.getTimezoneOffset() / 60,\r\n        now_hours     = date.getHours(),\r\n        custom_offset = offset || offset === 0 ? offset : -utc_offset;\r\n\r\n    date.setHours(now_hours + utc_offset + custom_offset);\r\n\r\n    var year    = date.getFullYear(),\r\n        month   = this.setLeadingZeroToInt(date.getMonth() + 1,   2),\r\n        day     = this.setLeadingZeroToInt(date.getDate(),        2),\r\n        hour    = this.setLeadingZeroToInt(date.getHours(),       2),\r\n        minute  = this.setLeadingZeroToInt(date.getMinutes(),     2),\r\n        second  = this.setLeadingZeroToInt(date.getSeconds(),     2);\r\n\r\n    return (year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second);\r\n  },\r\n\r\n  setLeadingZeroToInt: function(num, size) {\r\n    var s = num + '';\r\n    while (s.length < size) { s = '0' + s; }\r\n    return s;\r\n  },\r\n\r\n  randomInt: function(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n};\r\n","\"use strict\";\r\n\r\nvar data        = require('./data'),\r\n    terms       = require('./terms'),\r\n    cookies     = require('./helpers/cookies'),\r\n    uri         = require('./helpers/uri'),\r\n    utils       = require('./helpers/utils'),\r\n    params      = require('./params'),\r\n    migrations  = require('./migrations');\r\n\r\nvar blacklist = ['partner', 'office', 'agent'];\r\n\r\nmodule.exports = function(prefs) {\r\n\r\n  var p         = params.fetch(prefs);\r\n  var get_param = uri.getParam();\r\n  var domain    = p.domain.host,\r\n      isolate   = p.domain.isolate,\r\n      lifetime  = p.lifetime;\r\n\r\n  migrations.go(lifetime, domain, isolate);\r\n\r\n  var __sbjs_type,\r\n      __sbjs_source,\r\n      __sbjs_medium,\r\n      __sbjs_campaign,\r\n      __sbjs_content,\r\n      __sbjs_term;\r\n\r\n  function mainData() {\r\n    var sbjs_data;\r\n    if (\r\n        typeof get_param.utm_source        !== 'undefined' ||\r\n        typeof get_param.utm_medium        !== 'undefined' ||\r\n        typeof get_param.utm_campaign      !== 'undefined' ||\r\n        typeof get_param.utm_content       !== 'undefined' ||\r\n        typeof get_param.utm_term          !== 'undefined' ||\r\n        typeof get_param.gclid             !== 'undefined' ||\r\n        typeof get_param.yclid             !== 'undefined' ||\r\n        typeof get_param[p.campaign_param] !== 'undefined' ||\r\n        typeof get_param[p.term_param]     !== 'undefined' ||\r\n        typeof get_param[p.content_param]  !== 'undefined'\r\n    ) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.utm);\r\n    } else if (checkReferer(terms.traffic.organic)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.organic);\r\n    } else if (!cookies.get(data.containers.session) && checkReferer(terms.traffic.referral)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.referral);\r\n    } else if (!cookies.get(data.containers.first) && !cookies.get(data.containers.current)) {\r\n      setFirstAndCurrentExtraData();\r\n      sbjs_data = getData(terms.traffic.typein);\r\n    } else {\r\n      return cookies.get(data.containers.current);\r\n    }\r\n\r\n    return sbjs_data;\r\n  }\r\n\r\n  function getData(type) {\r\n\r\n    switch (type) {\r\n\r\n      case terms.traffic.utm:\r\n\r\n        __sbjs_type = terms.traffic.utm;\r\n\r\n        if (typeof get_param.utm_source !== 'undefined') {\r\n          __sbjs_source = get_param.utm_source;\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_source = 'google';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_source = 'yandex';  \r\n        } else {\r\n          __sbjs_source = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_medium !== 'undefined') {\r\n          __sbjs_medium = get_param.utm_medium;\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_medium = 'cpc';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_medium = 'cpc';  \r\n        } else {\r\n          __sbjs_medium = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_campaign !== 'undefined') {\r\n          __sbjs_campaign = get_param.utm_campaign;\r\n        } else if (typeof get_param[p.campaign_param] !== 'undefined') {\r\n          __sbjs_campaign = get_param[p.campaign_param];\r\n        } else if (typeof get_param.gclid !== 'undefined') {\r\n          __sbjs_campaign = 'google_cpc';\r\n        } else if (typeof get_param.yclid !== 'undefined') {\r\n          __sbjs_campaign = 'yandex_cpc';  \r\n        } else {\r\n          __sbjs_campaign = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_content !== 'undefined') {\r\n          __sbjs_content = get_param.utm_content;\r\n        } else if (typeof get_param[p.content_param] !== 'undefined') {\r\n          __sbjs_content = get_param[p.content_param];\r\n        } else {\r\n          __sbjs_content = terms.none;\r\n        }\r\n\r\n        if (typeof get_param.utm_term !== 'undefined') {\r\n          __sbjs_term = get_param.utm_term;\r\n        } else if (typeof get_param[p.term_param] !== 'undefined') {\r\n          __sbjs_term = get_param[p.term_param];\r\n        } else {\r\n          __sbjs_term = getUtmTerm() || terms.none;\r\n        }\r\n\r\n        break;\r\n\r\n      case terms.traffic.organic:\r\n        __sbjs_type     = terms.traffic.organic;\r\n        __sbjs_source   = __sbjs_source || uri.getHost(document.referrer);\r\n        __sbjs_medium   = terms.referer.organic;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = terms.none;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      case terms.traffic.referral:\r\n        __sbjs_type     = terms.traffic.referral;\r\n        __sbjs_source   = __sbjs_source || uri.getHost(document.referrer);\r\n        __sbjs_medium   = __sbjs_medium || terms.referer.referral;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = uri.parse(document.referrer).path;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      case terms.traffic.typein:\r\n        __sbjs_type     = terms.traffic.typein;\r\n        __sbjs_source   = p.typein_attributes.source;\r\n        __sbjs_medium   = p.typein_attributes.medium;\r\n        __sbjs_campaign = terms.none;\r\n        __sbjs_content  = terms.none;\r\n        __sbjs_term     = terms.none;\r\n        break;\r\n\r\n      default:\r\n        __sbjs_type     = terms.oops;\r\n        __sbjs_source   = terms.oops;\r\n        __sbjs_medium   = terms.oops;\r\n        __sbjs_campaign = terms.oops;\r\n        __sbjs_content  = terms.oops;\r\n        __sbjs_term     = terms.oops;\r\n    }\r\n    var sbjs_data = {\r\n      type:             __sbjs_type,\r\n      source:           __sbjs_source,\r\n      medium:           __sbjs_medium,\r\n      campaign:         __sbjs_campaign,\r\n      content:          __sbjs_content,\r\n      term:             __sbjs_term\r\n    };\r\n\r\n    return data.pack.main(sbjs_data);\r\n\r\n  }\r\n\r\n  function getUtmTerm() {\r\n    var referer = document.referrer;\r\n    if (get_param.utm_term) {\r\n      return get_param.utm_term;\r\n    } else if (referer && uri.parse(referer).host && uri.parse(referer).host.match(/^(?:.*\\.)?yandex\\..{2,9}$/i)) {\r\n      try {\r\n        return uri.getParam(uri.parse(document.referrer).query).text;\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function checkReferer(type) {\r\n    var referer = document.referrer;\r\n    switch(type) {\r\n      case terms.traffic.organic:\r\n        return (!!referer && checkRefererHost(referer) && isOrganic(referer));\r\n      case terms.traffic.referral:\r\n        return (!!referer && checkRefererHost(referer) && isReferral(referer));\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  function checkRefererHost(referer) {\r\n    if (p.domain) {\r\n      if (!isolate) {\r\n        var host_regex = new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(domain) + '$', 'i');\r\n        return !(uri.getHost(referer).match(host_regex));\r\n      } else {\r\n        return (uri.getHost(referer) !== uri.getHost(domain));\r\n      }\r\n    } else {\r\n      return (uri.getHost(referer) !== uri.getHost(document.location.href));\r\n    }\r\n  }\r\n\r\n  function isOrganic(referer) {\r\n\r\n    var y_host  = 'yandex',\r\n        y_param = 'text',\r\n        g_host  = 'google';\r\n\r\n    var y_host_regex  = new RegExp('^(?:.*\\\\.)?'  + utils.escapeRegexp(y_host)  + '\\\\..{2,9}$'),\r\n        y_param_regex = new RegExp('.*'           + utils.escapeRegexp(y_param) + '=.*'),\r\n        g_host_regex  = new RegExp('^(?:www\\\\.)?' + utils.escapeRegexp(g_host)  + '\\\\..{2,9}$');\r\n\r\n    if (\r\n        !!uri.parse(referer).query &&\r\n        !!uri.parse(referer).host.match(y_host_regex) &&\r\n        !!uri.parse(referer).query.match(y_param_regex)\r\n      ) {\r\n      __sbjs_source = y_host;\r\n      return true;\r\n    } else if (!!uri.parse(referer).host.match(g_host_regex)) {\r\n      __sbjs_source = g_host;\r\n      return true;\r\n    } else if (!!uri.parse(referer).query) {\r\n      for (var i = 0; i < p.organics.length; i++) {\r\n        if (\r\n            uri.parse(referer).host.match(new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(p.organics[i].host)  + '$', 'i')) &&\r\n            uri.parse(referer).query.match(new RegExp('.*'         + utils.escapeRegexp(p.organics[i].param) + '=.*', 'i'))\r\n          ) {\r\n          __sbjs_source = p.organics[i].display || p.organics[i].host;\r\n          return true;\r\n        }\r\n        if (i + 1 === p.organics.length) {\r\n          return false;\r\n        }\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function isReferral(referer) {\r\n    if (p.referrals.length > 0) {\r\n      for (var i = 0; i < p.referrals.length; i++) {\r\n        if (uri.parse(referer).host.match(new RegExp('^(?:.*\\\\.)?' + utils.escapeRegexp(p.referrals[i].host) + '$', 'i'))) {\r\n          __sbjs_source = p.referrals[i].display  || p.referrals[i].host;\r\n          __sbjs_medium = p.referrals[i].medium   || terms.referer.referral;\r\n          return true;\r\n        }\r\n        if (i + 1 === p.referrals.length) {\r\n          __sbjs_source = uri.getHost(referer);\r\n          return true;\r\n        }\r\n      }\r\n    } else {\r\n      __sbjs_source = uri.getHost(referer);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  function setFirstAndCurrentExtraData() {\r\n    cookies.set(data.containers.current_extra, data.pack.extra(p.timezone_offset), lifetime, domain, isolate);\r\n    if (!cookies.get(data.containers.first_extra)) {\r\n      cookies.set(data.containers.first_extra, data.pack.extra(p.timezone_offset), lifetime, domain, isolate);\r\n    }\r\n  }\r\n\r\n  (function setData() {\r\n\r\n    if (get_param.ldg && blacklist.includes(get_param.ldg)) {\r\n      // destroy sourcebuster cookies on blacklist\r\n      Object.values(data.containers).map(function(cookie) {\r\n        cookies.destroy(cookie, domain, isolate);\r\n      });\r\n      return;\r\n    }\r\n    // Main data\r\n    cookies.set(data.containers.current, mainData(), lifetime, domain, isolate);\r\n    if (!cookies.get(data.containers.first)) {\r\n      cookies.set(data.containers.first, cookies.get(data.containers.current), lifetime, domain, isolate);\r\n    }\r\n\r\n    // User data\r\n    var visits, udata;\r\n    if (!cookies.get(data.containers.udata)) {\r\n      visits  = 1;\r\n      udata   = data.pack.user(visits, p.user_ip);\r\n    } else {\r\n      visits  = parseInt(cookies.parse(data.containers.udata)[cookies.unsbjs(data.containers.udata)][data.aliases.udata.visits]) || 1;\r\n      visits  = cookies.get(data.containers.session) ? visits : visits + 1;\r\n      udata   = data.pack.user(visits, p.user_ip);\r\n    }\r\n    cookies.set(data.containers.udata, udata, lifetime, domain, isolate);\r\n\r\n    // Session\r\n    var pages_count;\r\n    if (!cookies.get(data.containers.session)) {\r\n      pages_count = 1;\r\n    } else {\r\n      pages_count = parseInt(cookies.parse(data.containers.session)[cookies.unsbjs(data.containers.session)][data.aliases.session.pages_seen]) || 1;\r\n      pages_count += 1;\r\n    }\r\n    cookies.set(data.containers.session, data.pack.session(pages_count), p.session_length, domain, isolate);\r\n\r\n    // Promocode\r\n    if (p.promocode && !cookies.get(data.containers.promocode)) {\r\n      cookies.set(data.containers.promocode, data.pack.promo(p.promocode), lifetime, domain, isolate);\r\n    }\r\n\r\n  })();\r\n\r\n  return cookies.parse(data.containers);\r\n\r\n};","\"use strict\";\r\n\r\nvar data    = require('./data'),\r\n    cookies = require('./helpers/cookies');\r\n\r\nmodule.exports = {\r\n\r\n  go: function(lifetime, domain, isolate) {\r\n\r\n    var migrate = this.migrations,\r\n        _with   = { l: lifetime, d: domain, i: isolate };\r\n\r\n    var i;\r\n\r\n    if (!cookies.get(data.containers.first) && !cookies.get(data.service.migrations)) {\r\n\r\n      var mids = [];\r\n      for (i = 0; i < migrate.length; i++) { mids.push(migrate[i].id); }\r\n\r\n      var advance = '';\r\n      for (i = 0; i < mids.length; i++) {\r\n        advance += mids[i] + '=1';\r\n        if (i < mids.length - 1) { advance += data.delimiter; }\r\n      }\r\n      cookies.set(data.service.migrations, advance, _with.l, _with.d, _with.i);\r\n\r\n    } else if (!cookies.get(data.service.migrations)) {\r\n\r\n      // We have only one migration for now, so just\r\n      for (i = 0; i < migrate.length; i++) {\r\n        migrate[i].go(migrate[i].id, _with);\r\n      }\r\n\r\n    }\r\n\r\n  },\r\n\r\n  migrations: [\r\n\r\n    {\r\n      id: '1418474375998',\r\n      version: '1.0.0-beta',\r\n      go: function(mid, _with) {\r\n\r\n        var success = mid + '=1',\r\n            fail    = mid + '=0';\r\n\r\n        var safeReplace = function($0, $1, $2) {\r\n          return ($1 || $2 ? $0 : data.delimiter);\r\n        };\r\n\r\n        try {\r\n\r\n          // Switch delimiter and renew cookies\r\n          var _in = [];\r\n          for (var prop in data.containers) {\r\n            if (data.containers.hasOwnProperty(prop)) {\r\n              _in.push(data.containers[prop]);\r\n            }\r\n          }\r\n\r\n          for (var i = 0; i < _in.length; i++) {\r\n            if (cookies.get(_in[i])) {\r\n              var buffer = cookies.get(_in[i]).replace(/(\\|)?\\|(\\|)?/g, safeReplace);\r\n              cookies.destroy(_in[i], _with.d, _with.i);\r\n              cookies.destroy(_in[i], _with.d, !_with.i);\r\n              cookies.set(_in[i], buffer, _with.l, _with.d, _with.i);\r\n            }\r\n          }\r\n\r\n          // Update `session`\r\n          if (cookies.get(data.containers.session)) {\r\n            cookies.set(data.containers.session, data.pack.session(0), _with.l, _with.d, _with.i);\r\n          }\r\n\r\n          // Yay!\r\n          cookies.set(data.service.migrations, success, _with.l, _with.d, _with.i);\r\n\r\n        } catch (err) {\r\n          // Oops\r\n          cookies.set(data.service.migrations, fail, _with.l, _with.d, _with.i);\r\n        }\r\n      }\r\n    }\r\n\r\n  ]\r\n\r\n};","\"use strict\";\r\n\r\nvar terms = require('./terms'),\r\n    uri   = require('./helpers/uri');\r\n\r\nmodule.exports = {\r\n\r\n  fetch: function(prefs) {\r\n\r\n    var user   = prefs || {},\r\n        params = {};\r\n\r\n    // Set `lifetime of the cookie` in months\r\n    params.lifetime = this.validate.checkFloat(user.lifetime) || 6;\r\n    params.lifetime = parseInt(params.lifetime * 30 * 24 * 60);\r\n\r\n    // Set `session length` in minutes\r\n    params.session_length = this.validate.checkInt(user.session_length) || 30;\r\n\r\n    // Set `timezone offset` in hours\r\n    params.timezone_offset = this.validate.checkInt(user.timezone_offset);\r\n\r\n    // Set `campaign param` for AdWords links\r\n    params.campaign_param = user.campaign_param || false;\r\n\r\n    // Set `term param` and `content param` for AdWords links\r\n    params.term_param = user.term_param || false;\r\n    params.content_param = user.content_param || false;\r\n\r\n    // Set `user ip`\r\n    params.user_ip = user.user_ip || terms.none;\r\n\r\n    // Set `promocode`\r\n    if (user.promocode) {\r\n      params.promocode = {};\r\n      params.promocode.min = parseInt(user.promocode.min) || 100000;\r\n      params.promocode.max = parseInt(user.promocode.max) || 999999;\r\n    } else {\r\n      params.promocode = false;\r\n    }\r\n\r\n    // Set `typein attributes`\r\n    if (user.typein_attributes && user.typein_attributes.source && user.typein_attributes.medium) {\r\n      params.typein_attributes = {};\r\n      params.typein_attributes.source = user.typein_attributes.source;\r\n      params.typein_attributes.medium = user.typein_attributes.medium;\r\n    } else {\r\n      params.typein_attributes = { source: '(direct)', medium: '(none)' };\r\n    }\r\n\r\n    // Set `domain`\r\n    if (user.domain && this.validate.isString(user.domain)) {\r\n      params.domain = { host: user.domain, isolate: false };\r\n    } else if (user.domain && user.domain.host) {\r\n      params.domain = user.domain;\r\n    } else {\r\n      params.domain = { host: uri.getHost(document.location.hostname), isolate: false };\r\n    }\r\n\r\n    // Set `referral sources`\r\n    params.referrals = [];\r\n\r\n    if (user.referrals && user.referrals.length > 0) {\r\n      for (var ir = 0; ir < user.referrals.length; ir++) {\r\n        if (user.referrals[ir].host) {\r\n          params.referrals.push(user.referrals[ir]);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Set `organic sources`\r\n    params.organics = [];\r\n\r\n    if (user.organics && user.organics.length > 0) {\r\n      for (var io = 0; io < user.organics.length; io++) {\r\n        if (user.organics[io].host && user.organics[io].param) {\r\n          params.organics.push(user.organics[io]);\r\n        }\r\n      }\r\n    }\r\n\r\n    params.organics.push({ host: 'bing.com',      param: 'q',     display: 'bing'            });\r\n    params.organics.push({ host: 'yahoo.com',     param: 'p',     display: 'yahoo'           });\r\n    params.organics.push({ host: 'about.com',     param: 'q',     display: 'about'           });\r\n    params.organics.push({ host: 'aol.com',       param: 'q',     display: 'aol'             });\r\n    params.organics.push({ host: 'ask.com',       param: 'q',     display: 'ask'             });\r\n    params.organics.push({ host: 'globososo.com', param: 'q',     display: 'globo'           });\r\n    params.organics.push({ host: 'go.mail.ru',    param: 'q',     display: 'go.mail.ru'      });\r\n    params.organics.push({ host: 'rambler.ru',    param: 'query', display: 'rambler'         });\r\n    params.organics.push({ host: 'tut.by',        param: 'query', display: 'tut.by'          });\r\n\r\n    params.referrals.push({ host: 't.co',                         display: 'twitter.com'     });\r\n    params.referrals.push({ host: 'plus.url.google.com',          display: 'plus.google.com' });\r\n\r\n\r\n    return params;\r\n\r\n  },\r\n\r\n  validate: {\r\n\r\n    checkFloat: function(v) {\r\n      return v && this.isNumeric(parseFloat(v)) ? parseFloat(v) : false;\r\n    },\r\n\r\n    checkInt: function(v) {\r\n      return v && this.isNumeric(parseInt(v)) ? parseInt(v) : false;\r\n    },\r\n\r\n    isNumeric: function(v){\r\n      return !isNaN(v);\r\n    },\r\n\r\n    isString: function(v) {\r\n      return Object.prototype.toString.call(v) === '[object String]';\r\n    }\r\n\r\n  }\r\n\r\n};","\"use strict\";\r\n\r\nmodule.exports = {\r\n\r\n  traffic: {\r\n    utm:        'utm',\r\n    organic:    'organic',\r\n    referral:   'referral',\r\n    typein:     'typein'\r\n  },\r\n\r\n  referer: {\r\n    referral:   'referral',\r\n    organic:    'organic',\r\n    social:     'social'\r\n  },\r\n\r\n  none:         '(none)',\r\n  oops:         '(Houston, we have a problem)'\r\n\r\n};\r\n"]}